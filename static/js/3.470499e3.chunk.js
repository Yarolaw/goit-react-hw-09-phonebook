(this["webpackJsonpgoit-react-hw-03-phonebook"]=this["webpackJsonpgoit-react-hw-03-phonebook"]||[]).push([[3],{110:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var a=n(111),c=n.n(a),r=n(2);function s(t){var e=t.children,n=t.title;return Object(r.jsxs)("section",{className:c.a.section,children:[n?Object(r.jsx)("h2",{className:c.a.title,children:n}):null,e]})}},111:function(t,e,n){t.exports={section:"Section_section__6xXfv",title:"Section_title__1YKbp"}},117:function(t,e,n){t.exports={item:"ContactsList_item__363Az",nameText:"ContactsList_nameText__2SCUi",button:"ContactsList_button__2U2V4"}},118:function(t,e,n){t.exports={overlay:"ContactModal_overlay__cFKIw",modal:"ContactModal_modal__1ng94",controls:"ContactModal_controls__FO6jr",close:"ContactModal_close__fYeDk",closeIcon:"ContactModal_closeIcon__3zymV"}},122:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return L}));var a=n(112),c=n(1),r=n(10),s=n(19),o=n.n(s),i=n(27),u=n(21),l=n.n(u),b=n(9),j=n(24),d=n(32),m=function(t){return t.contacts.item},p=function(t){return t.contacts.isLoading},f=function(t){return t.contacts.filter},O=Object(d.a)([m,f],(function(t,e){return t.filter((function(t){return t.name.toLowerCase().includes(e.toLowerCase())}))})),h=Object(d.a)([m],(function(t){return function(e){return t.map((function(t){return t.name})).includes(e)}})),x=(n(116),n(51)),v=n.n(x),C=n(110),g=n(2);function N(){var t=Object(c.useState)(""),e=Object(a.a)(t,2),n=e[0],s=e[1],u=Object(c.useState)(""),d=Object(a.a)(u,2),m=d[0],p=d[1],f=Object(r.c)(h),O=Object(r.b)(),x=function(t){if(t.preventDefault(),f(n))return alert("".concat(n," is already in contacts"));O(function(t,e){return function(){var n=Object(i.a)(o.a.mark((function n(a){var c,r,s;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c={name:t,number:e},a(b.a.addContactsRequest()),Object(j.a)("\u0417\u0430\u043f\u0438\u0441\u044c \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430"),n.prev=3,n.next=6,l.a.post("/contacts",c);case 6:r=n.sent,s=r.data,a(b.a.addContactsSuccess(s)),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(3),a(b.a.addContactsError(n.t0.massage)),Object(j.b)(n.t0.message);case 15:case"end":return n.stop()}}),n,null,[[3,11]])})));return function(t){return n.apply(this,arguments)}}()}(n,m)),s(""),p("")};return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("form",{className:"form",onSubmit:function(t){return x(t)},children:[Object(g.jsxs)("div",{className:"inputWrapper",children:[Object(g.jsx)("input",{className:"input",type:"text",name:"name",id:"name",value:n,placeholder:"\u0438\u043c\u044f",onChange:function(t){return s(t.target.value)}}),Object(g.jsx)("label",{className:n?"labelRight":"label",htmlFor:"name"})]}),Object(g.jsxs)("div",{className:"inputWrapper",children:[Object(g.jsx)("label",{className:m?"labelRight":"label",htmlFor:"phone"}),Object(g.jsx)("input",{className:"input",type:"tel",name:"number",id:"number",value:m,placeholder:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",onChange:function(t){return p(t.target.value)}})]}),Object(g.jsx)("button",{className:"button",type:"submit",disabled:!(n&&m),children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]})})}var _=n(117),y=n.n(_),w=n(113);function k(t){var e=t.onOpenModal,n=Object(r.c)(O),a=Object(r.b)();return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)("ul",{children:n.map((function(t){var n=t.id,c=t.name,r=t.number;return Object(g.jsxs)("li",{className:y.a.item,children:[Object(g.jsxs)("p",{className:y.a.nameText,children:[c,": ",Object(g.jsx)("span",{children:r})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("button",{className:y.a.button,type:"button",onClick:function(){return e({name:c,number:r},n)},children:Object(g.jsx)(w.c,{size:"20"})}),Object(g.jsx)("button",{className:y.a.button,type:"button",onClick:function(){return a(function(t){return function(){var e=Object(i.a)(o.a.mark((function e(n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(b.a.deleteContactsRequest()),e.prev=1,e.next=4,l.a.delete("/contacts/".concat(t));case 4:n(b.a.deleteContactsSuccess(t)),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),n(b.a.deleteContactsError(e.t0.massage)),Object(j.b)(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()}(n))},children:Object(g.jsx)(w.b,{size:"20",className:y.a.delete})})]})]},n)}))})})}function S(){var t=Object(r.c)(f),e=Object(r.b)();return Object(g.jsx)("form",{className:"form",children:Object(g.jsxs)("div",{className:"inputWrapper",children:[Object(g.jsx)("label",{className:"label",name:"filter",htmlFor:"filter",value:t}),Object(g.jsx)("input",{style:{marginBottom:"30px"},className:"input",value:t,type:"text",id:"filter",placeholder:"\u043d\u0430\u0439\u0442\u0438 \u043a\u043e\u043d\u0442\u0430\u043a\u0442 \u043f\u043e \u0438\u043c\u0435\u043d\u0438",onChange:function(t){return e(b.a.changeFilter(t.target.value))}})]})})}var F=n(118),E=n.n(F);function M(t){var e=t.contactData,n=t.onCloseModal,s=e.contact,u=e.id,d=Object(c.useState)(""),m=Object(a.a)(d,2),p=m[0],f=m[1],O=Object(c.useState)(""),h=Object(a.a)(O,2),x=h[0],v=h[1],C=Object(r.b)();Object(c.useEffect)((function(){var t=function(t){"Escape"===t.code&&n(!1)};return window.addEventListener("keydown",t),function(){window.removeEventListener("keydown",t)}}));return Object(g.jsx)("div",{className:E.a.overlay,onClick:function(t){return function(t){t.currentTarget===t.target&&n()}(t)},children:Object(g.jsxs)("div",{className:E.a.modal,children:[Object(g.jsx)("button",{className:E.a.close,type:"button",onClick:function(){return n(!1)},children:Object(g.jsx)(w.a,{size:"30",className:E.a.closeIcon})}),Object(g.jsxs)("form",{className:E.a.form,children:[Object(g.jsxs)("div",{className:"inputWrapper",children:[Object(g.jsx)("label",{htmlFor:"editName"}),Object(g.jsx)("input",{className:"input",type:"text",name:"name",id:"editName",value:p,placeholder:s.name,onChange:function(t){var e=t.target.value;return f(e)}})]}),Object(g.jsxs)("div",{className:"inputWrapper",children:[Object(g.jsx)("label",{htmlFor:"editNumber"}),Object(g.jsx)("input",{className:"input",type:"tel",name:"number",id:"editNamber",value:x,placeholder:s.number,onChange:function(t){var e=t.target.value;return v(e)}})]}),Object(g.jsx)("button",{className:"button",type:"button",onClick:function(){var t={name:p||s.name,number:x||s.number};C(function(t,e){return function(){var n=Object(i.a)(o.a.mark((function n(a){var c,r;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(b.a.editContactsRequest()),n.prev=1,n.next=4,l.a.patch("/contacts/".concat(t),e);case 4:c=n.sent,r=c.data,console.log(r),a(b.a.editContactsSuccess(r)),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(1),a(b.a.editContactsError(n.t0.massage)),Object(j.b)(n.t0.message);case 14:case"end":return n.stop()}}),n,null,[[1,10]])})));return function(t){return n.apply(this,arguments)}}()}(u,t)),n(!1)},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})})}function L(){var t=Object(r.c)(m),e=Object(r.c)(p),n=Object(r.b)(),s=Object(c.useState)(!1),u=Object(a.a)(s,2),d=u[0],f=u[1],O=Object(c.useState)({}),h=Object(a.a)(O,2),x=h[0],_=h[1];return Object(c.useEffect)((function(){n(function(){var t=Object(i.a)(o.a.mark((function t(e){var n,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(b.a.fetchContactsRequest()),t.prev=1,t.next=4,l.a.get("/contacts");case 4:n=t.sent,a=n.data,e(b.a.fetchContactsSuccess(a)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),e(b.a.fetchContactsError(t.t0.massage)),Object(j.b)(t.t0.message);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}())}),[n]),Object(g.jsxs)(C.a,{title:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f \u0438 \u043d\u043e\u043c\u0435\u0440",children:[Object(g.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:e?Object(g.jsx)(v.a,{type:"Rings",color:"#00BFFF",height:80,width:80}):null}),Object(g.jsx)(N,{}),t.length?Object(g.jsxs)(C.a,{title:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b",children:[Object(g.jsx)(S,{}),Object(g.jsx)(k,{onOpenModal:function(t,e){f(!0),_({contact:t,id:e})}}),d&&Object(g.jsx)(M,{onCloseModal:f,contactData:x})]}):null]})}}}]);
//# sourceMappingURL=3.470499e3.chunk.js.map