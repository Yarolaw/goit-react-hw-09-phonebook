(this["webpackJsonpgoit-react-hw-03-phonebook"]=this["webpackJsonpgoit-react-hw-03-phonebook"]||[]).push([[0],{107:function(t,e,r){},108:function(t,e,r){},109:function(t,e,r){"use strict";r.r(e);var c,n,a,s,o,u,i=r(1),b=r.n(i),j=r(23),l=r.n(j),O=r(10),d=r(18),f=r(8),g=r(54),h=(r(42),r(28)),p=r(4),C=r(20),v=r(55),x=r.n(v),m=r(3),S=r(11),k=r(9),E=Object(p.c)([],(c={},Object(m.a)(c,k.a.fetchContactsSuccess,(function(t,e){return e.payload})),Object(m.a)(c,k.a.addContactsSuccess,(function(t,e){var r=e.payload;return[].concat(Object(h.a)(t),[r])})),Object(m.a)(c,k.a.deleteContactsSuccess,(function(t,e){var r=e.payload;return t.filter((function(t){return t.id!==r}))})),Object(m.a)(c,k.a.editContactsSuccess,(function(t,e){var r=e.payload,c=t.filter((function(t){return t.id!==r.id}));return[].concat(Object(h.a)(c),[r])})),c)),y=Object(p.c)("",Object(m.a)({},k.a.changeFilter,(function(t,e){return e.payload}))),R=Object(p.c)(!1,(n={},Object(m.a)(n,k.a.addContactsRequest,(function(){return!0})),Object(m.a)(n,k.a.addContactsSuccess,(function(){return!1})),Object(m.a)(n,k.a.addContactsError,(function(){return!1})),Object(m.a)(n,k.a.fetchContactsRequest,(function(){return!0})),Object(m.a)(n,k.a.fetchContactsSuccess,(function(){return!1})),Object(m.a)(n,k.a.fetchContactsError,(function(){return!1})),Object(m.a)(n,k.a.deleteContactsRequest,(function(){return!0})),Object(m.a)(n,k.a.deleteContactsSuccess,(function(){return!1})),Object(m.a)(n,k.a.deleteContactsError,(function(){return!1})),Object(m.a)(n,k.a.editContactsRequest,(function(){return!0})),Object(m.a)(n,k.a.editContactsSuccess,(function(){return!1})),Object(m.a)(n,k.a.editContactsError,(function(){return!1})),n)),q=Object(S.c)({item:E,filter:y,isLoading:R}),_=r(5),w={name:null,email:null},N=Object(p.c)(w,(a={},Object(m.a)(a,_.a.registerSuccess,(function(t,e){return e.payload.user})),Object(m.a)(a,_.a.logInSuccess,(function(t,e){return e.payload.user})),Object(m.a)(a,_.a.logOutSuccess,(function(){return w})),Object(m.a)(a,_.a.getCurrentUserSuccess,(function(t,e){return e.payload})),a)),I=Object(p.c)(null,(s={},Object(m.a)(s,_.a.registerSuccess,(function(t,e){return e.payload.token})),Object(m.a)(s,_.a.logInSuccess,(function(t,e){return e.payload.token})),Object(m.a)(s,_.a.logOutSuccess,(function(){return null})),s)),U=function(t,e){return e.payload},z=Object(p.c)(null,(o={},Object(m.a)(o,_.a.registerError,U),Object(m.a)(o,_.a.logInError,U),Object(m.a)(o,_.a.logOutError,U),Object(m.a)(o,_.a.getCurrentUserError,U),o)),F=Object(p.c)(!1,(u={},Object(m.a)(u,_.a.registerSuccess,(function(){return!0})),Object(m.a)(u,_.a.logInSuccess,(function(){return!0})),Object(m.a)(u,_.a.getCurrentUserSuccess,(function(){return!0})),Object(m.a)(u,_.a.logOutSuccess,(function(){return!1})),Object(m.a)(u,_.a.registerError,(function(){return!1})),Object(m.a)(u,_.a.logInError,(function(){return!1})),Object(m.a)(u,_.a.logOutError,(function(){return!0})),Object(m.a)(u,_.a.getCurrentUserError,(function(){return!1})),u)),T=Object(S.c)({user:N,token:I,error:z,isAuthenticated:F}),A=Object(h.a)(Object(p.d)({serializableCheck:{ignoredActions:[C.a,C.f,C.b,C.c,C.d,C.e]}})),W={key:"auth",storage:x.a,whitelist:["token"]},B=Object(p.a)({reducer:{contacts:q,auth:Object(C.g)(W,T)},middleware:A,devTools:!1}),L={store:B,persistor:Object(C.h)(B)},P=function(t){return t.auth.isAuthenticated},J=function(t){return t.auth.user.name},H=r(56),M=r(33),Z=r(14),D=r.n(Z),G=r(2);function K(){var t=Object(O.c)(P),e=window.innerWidth;return Object(G.jsxs)("nav",{className:D.a.nav,children:[Object(G.jsx)(d.b,{className:D.a.link,to:"/",children:Object(G.jsx)(H.a,{size:"20"})}),t&&Object(G.jsx)(d.b,{className:D.a.link,to:"/contacts",children:e<=767?Object(G.jsx)(M.b,{}):"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"})]})}function Q(){return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(d.b,{className:D.a.link,to:"/register",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(G.jsx)(d.b,{className:D.a.link,to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})}var V=r(30);function X(){var t=Object(O.c)(J),e=Object(O.b)();return Object(G.jsxs)("div",{className:D.a.userWrapper,children:[Object(G.jsx)("span",{className:D.a.name,children:t}),Object(G.jsx)(M.a,{size:"20",className:D.a.button,type:"button",onClick:function(){return e(V.a.logOut())}})]})}function Y(){var t=Object(O.c)(P);return Object(G.jsxs)("header",{className:D.a.header,children:[Object(G.jsx)(K,{}),t?Object(G.jsx)(X,{}):Object(G.jsx)(Q,{})]})}var $=r(22),tt=r(34);function et(t){var e=t.component,r=t.redirectTo,c=Object(tt.a)(t,["component","redirectTo"]),n=Object(O.c)(P);return Object(G.jsx)(f.b,Object($.a)(Object($.a)({},c),{},{render:function(t){return n?Object(G.jsx)(e,Object($.a)({},t)):Object(G.jsx)(f.a,{to:r})}}))}function rt(t){var e=t.component,r=t.redirectTo,c=Object(tt.a)(t,["component","redirectTo"]),n=Object(O.c)(P);return Object(G.jsx)(f.b,Object($.a)(Object($.a)({},c),{},{render:function(t){return n&&c.restricted?Object(G.jsx)(f.a,{to:r}):Object(G.jsx)(e,Object($.a)({},t))}}))}var ct=r(51),nt=r.n(ct),at=r(52),st=(r(24),b.a.lazy((function(){return Promise.all([r.e(8),r.e(5)]).then(r.bind(null,119))}))),ot=b.a.lazy((function(){return Promise.all([r.e(4),r.e(3)]).then(r.bind(null,122))})),ut=b.a.lazy((function(){return r.e(6).then(r.bind(null,120))})),it=b.a.lazy((function(){return r.e(7).then(r.bind(null,121))}));function bt(){var t=Object(O.b)();return Object(i.useEffect)((function(){t(V.a.getCurrentUser())}),[t]),Object(G.jsx)(G.Fragment,{children:Object(G.jsxs)(at.a,{children:[Object(G.jsx)(Y,{}),Object(G.jsx)(i.Suspense,{fallback:Object(G.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(G.jsx)(nt.a,{type:"Rings",color:"#00BFFF",height:80,width:80})}),children:Object(G.jsxs)(f.d,{children:[Object(G.jsx)(f.b,{path:"/",exact:!0,component:st}),Object(G.jsx)(rt,{path:"/login",redirectTo:"/contacts",restricted:!0,component:ut}),Object(G.jsx)(rt,{path:"/register",redirectTo:"/contacts",restricted:!0,component:it}),Object(G.jsx)(et,{path:"/contacts",component:ot,redirectTo:"/login"})]})})]})})}r(107),r(108);l.a.render(Object(G.jsx)(b.a.StrictMode,{children:Object(G.jsx)(O.a,{store:L.store,children:Object(G.jsx)(g.a,{loading:null,persistor:L.persistor,children:Object(G.jsx)(d.a,{children:Object(G.jsx)(f.d,{children:Object(G.jsx)(bt,{})})})})})}),document.getElementById("root"))},14:function(t,e,r){t.exports={header:"Navigations_header__1jb2E",link:"Navigations_link__1w193",nav:"Navigations_nav__2OWaF",button:"Navigations_button___bkyd",name:"Navigations_name__L2Zi5",userWrapper:"Navigations_userWrapper__3vx4N"}},24:function(t,e,r){"use strict";r.d(e,"b",(function(){return n})),r.d(e,"a",(function(){return a}));var c=r(29);r(42);c.b.configure({position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,transition:c.a});var n=function(t){return c.b.error(t)},a=function(t){return c.b.info(t)}},30:function(t,e,r){"use strict";var c=r(19),n=r.n(c),a=r(27),s=r(21),o=r.n(s),u=r(5),i=r(24);o.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var b={set:function(t){o.a.defaults.headers.common.Authorization="Bearer ".concat(t)},unset:function(){o.a.defaults.headers.common.Authorization=""}},j={token:b,register:function(t){return function(){var e=Object(a.a)(n.a.mark((function e(r){var c,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(u.a.registerRequest()),e.prev=1,e.next=4,o.a.post("/users/signup",t);case 4:c=e.sent,a=c.data,b.set(a.token),r(u.a.registerSuccess(a)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),r(u.a.registerError(e.t0.message)),Object(i.b)(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()},logIn:function(t){return function(){var e=Object(a.a)(n.a.mark((function e(r){var c,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(u.a.logInRequest()),e.prev=1,e.next=4,o.a.post("/users/login",t);case 4:c=e.sent,a=c.data,b.set(a.token),r(u.a.logInSuccess(a)),Object(i.a)("\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),r(u.a.logInError(e.t0.message)),Object(i.b)(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()},logOut:function(){return function(){var t=Object(a.a)(n.a.mark((function t(e){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(u.a.logOutRequest()),t.prev=1,t.next=4,o.a.post("/users/logout");case 4:b.unset(),e(u.a.logOutSuccess()),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),e(u.a.logOutError(t.t0.message)),Object(i.b)(t.t0.message);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var t=Object(a.a)(n.a.mark((function t(e,r){var c,a,s,i;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=r(),a=c.auth.token){t.next=3;break}return t.abrupt("return");case 3:return b.set(a),e(u.a.getCurrentUserRequest()),t.prev=5,t.next=8,o.a.get("/users/current");case 8:s=t.sent,i=s.data,e(u.a.getCurrentUserSuccess(i)),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(5),e(u.a.getCurrentUserError(t.t0.message));case 16:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e,r){return t.apply(this,arguments)}}()}};e.a=j},5:function(t,e,r){"use strict";var c=r(4),n=Object(c.b)("auth/registerRequest"),a=Object(c.b)("auth/registerSuccess"),s=Object(c.b)("auth/registerError"),o=Object(c.b)("auth/logInRequest"),u=Object(c.b)("auth/logInSuccess"),i=Object(c.b)("auth/logInError"),b=Object(c.b)("auth/logOutRequest"),j=Object(c.b)("auth/logOutSuccess"),l=Object(c.b)("auth/logOutError"),O=Object(c.b)("auth/getCurrentUserRequest"),d=Object(c.b)("auth/getCurrentUserSuccess"),f=Object(c.b)("auth/getCurrentUserError");e.a={registerRequest:n,registerSuccess:a,registerError:s,logInRequest:o,logInSuccess:u,logInError:i,logOutRequest:b,logOutSuccess:j,logOutError:l,getCurrentUserRequest:O,getCurrentUserSuccess:d,getCurrentUserError:f}},52:function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));var c=r(57),n=r.n(c),a=r(2);function s(t){var e=t.children;return Object(a.jsx)("div",{className:n.a.container,children:e})}},57:function(t,e,r){t.exports={container:"Container_container__1cyk3"}},9:function(t,e,r){"use strict";var c=r(4),n=Object(c.b)("contacts/changeFilter"),a=Object(c.b)("contacts/fetchContactsRequest"),s=Object(c.b)("contacts/fetchContactsSuccess"),o=Object(c.b)("contacts/fetchContactsError"),u=Object(c.b)("contacts/addContactsRequest"),i=Object(c.b)("contacts/addContactsSuccess"),b=Object(c.b)("contacts/addContactsError"),j=Object(c.b)("contacts/deleteContactsRequest"),l=Object(c.b)("contacts/deleteContactsSuccess"),O=Object(c.b)("contacts/deleteContactsError"),d=Object(c.b)("contacts/editContactsRequest"),f=Object(c.b)("contacts/editContactsSuccess"),g=Object(c.b)("contacts/editContactsError");e.a={fetchContactsRequest:a,fetchContactsSuccess:s,fetchContactsError:o,addContactsRequest:u,addContactsSuccess:i,addContactsError:b,deleteContactsRequest:j,deleteContactsSuccess:l,deleteContactsError:O,editContactsRequest:d,editContactsSuccess:f,editContactsError:g,changeFilter:n}}},[[109,1,2]]]);
//# sourceMappingURL=main.9aa90012.chunk.js.map